var app=angular.module("glint",["glint.services","glint.ideas","glint.votes","ngAnimate"]).filter("moment",function(){return function(a){return moment(a).fromNow()}}),glintServices=angular.module("glint.services",[]);glintServices.factory("Ideas",function(a){var b=function(){return a({method:"GET",url:"/api/ideas"}).then(function(a){return a.data})["catch"](function(a){console.error("getIdeas error",a)})},c=function(b){return a({method:"POST",url:"/api/ideas",data:b}).then(function(a){return a.data})["catch"](function(a){console.error("createIdeas error",a)})};return{getIdeas:b,createIdea:c}}),glintServices.factory("Votes",function(a){var b=function(b){return a({method:"POST",url:"/api/vote/upvote",data:b}).then(function(a){return a.data})["catch"](function(a){console.error("upvote error",a)})},c=function(b){return a({method:"POST",url:"/api/vote/downvote",data:b}).then(function(a){return a.data})["catch"](function(a){console.error("downvote error",a)})};return{upvote:b,downvote:c}}),angular.module("glint.ideas",[]).controller("IdeasCtrl",function(a,b){var c=this;c.data={ideas:[]},c.idea={},c.postSuccess=!1,c.submitted=!1,c.displayIdeas=function(){a.getIdeas().then(function(a){a=b("orderBy")(a,"votes",!0),c.data.ideas=a})["catch"](function(a){console.error("displayIdeas error",a)})},c.submitIdea=function(){if(c.submitted===!1)c.submitted=!0;else{_.escape(c.idea.title),_.escape(c.idea.text);var b=JSON.stringify(c.idea);a.createIdea(b).then(function(){c.postSuccess=!0,c.submitted=!1,c.idea={},c.displayIdeas()})["catch"](function(a){console.error("createIdea error",a)})}},c.displayIdeas()}),angular.module("glint.votes",[]).controller("VotesCtrl",function(a){var b=this;b.upvote=function(b){var c=b;b=JSON.stringify(b),a.upvote(b).then(function(){c.votes++})["catch"](function(a){console.error("upvote error",a)})},b.downvote=function(b){var c=b;b=JSON.stringify(b),a.downvote(b).then(function(){c.votes--})["catch"](function(a){console.error("downvote error",a)})}});